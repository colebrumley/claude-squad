name: review
prompt: REVIEW_PROMPT_JSON
cases:
  - id: passing-implementation
    description: "Well-implemented feature that should pass review"
    input:
      spec: |
        # Code to Review
        Review this implementation of a greeting function:

        ```typescript
        // greet.ts
        export function greet(name: string): string {
          if (!name || name.trim() === '') {
            return 'Hello, stranger!';
          }
          return `Hello, ${name}!`;
        }

        // greet.test.ts
        import { greet } from './greet';

        test('greets by name', () => {
          expect(greet('Alice')).toBe('Hello, Alice!');
        });

        test('handles empty name', () => {
          expect(greet('')).toBe('Hello, stranger!');
        });

        test('handles whitespace name', () => {
          expect(greet('   ')).toBe('Hello, stranger!');
        });
        ```

        Original spec: Create greet(name) that returns "Hello, {name}!" and handles empty name.
    grade:
      criteria:
        - "Correctly identifies implementation as passing"
        - "Notes test coverage is adequate"
        - "No false positive issues raised"
      rubric: |
        5: Correctly passes with accurate assessment
        4: Passes with minor unnecessary suggestions
        3: Passes but misses some positive aspects
        2: Incorrectly identifies issues
        1: Incorrectly fails the implementation

  - id: failing-implementation
    description: "Implementation with bugs that should fail review"
    input:
      spec: |
        # Code to Review
        Review this implementation:

        ```typescript
        // calculator.ts
        export function divide(a: number, b: number): number {
          return a / b;  // Bug: no division by zero check
        }

        // calculator.test.ts
        import { divide } from './calculator';

        test('divides numbers', () => {
          expect(divide(10, 2)).toBe(5);
        });
        // Missing: no test for division by zero
        ```

        Original spec: Create divide(a, b) that safely handles division by zero.
    grade:
      criteria:
        - "Identifies missing division by zero handling"
        - "Notes missing test case"
        - "Correctly fails the review"
      rubric: |
        5: Identifies all issues and correctly fails
        4: Identifies main issue, may miss test gap
        3: Identifies some issues
        2: Misses critical bug
        1: Incorrectly passes the implementation

  - id: partial-implementation
    description: "Partially complete implementation"
    input:
      spec: |
        # Code to Review
        Review this implementation:

        ```typescript
        // auth.ts
        export function validatePassword(password: string): boolean {
          return password.length >= 8;
        }

        // No tests written yet
        ```

        Original spec: Create password validation with:
        1. Minimum 8 characters
        2. At least one uppercase letter
        3. At least one number
        4. Unit tests for all rules
    grade:
      criteria:
        - "Identifies missing uppercase check"
        - "Identifies missing number check"
        - "Notes missing tests"
        - "Correctly fails the review"
      rubric: |
        5: Identifies all gaps comprehensively
        4: Identifies most gaps
        3: Identifies some gaps
        2: Misses multiple requirements
        1: Incorrectly passes incomplete work
